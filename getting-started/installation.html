<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><base href="/"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="design/index.css"><title>Creating Hitchy Project ... | Hitchy</title></head><body class="page"><div id="wrapper"><div id="north"><div class="navigation"><nav class="primary center-block"><ul><li class="item"><a href="">Home</a></li><li class="item"><a href="about/">About</a></li><li class="item"><a href="download/">Download</a></li><li class="selected item"><a href="getting-started/">Getting Started</a></li><li class="item"><a href="concepts/">Concepts</a></li><li class="item"><a href="runtime/">At Runtime</a></li><li class="item"><a href="extensions/">Extensions</a></li></ul><div class="boilerplate"><div class="site-title">Hitchy</div><div class="site-subtitle">a Javascript-based web application framework</div></div></nav></div><div class="center-block"><h1>Creating Hitchy Project ...</h1></div></div><div id="main"><div class="columnizer"><div id="core"><article class="center-block"><h1 id="…-From-Scratch"><a href="#…-From-Scratch" class="headerlink" title="… From Scratch"></a>… From Scratch</h1><p>If you want to develop a web application with Hitchy you could start creating a project from scratch. </p>
<ol>
<li><p>Using your favourite CLI create folder to contain your new project:<br><code>mkdir myproject</code></p>
</li>
<li><p>Of course, you’ll need to enter it next:<br><code>cd myproject</code></p>
</li>
<li><p>Create new package.json file for managing your project and its dependencies:<br><code>npm init</code><br>Answer all questions as desired.</p>
</li>
<li><p>Install Hitchy as a dependency:<br><code>npm install hitchy</code></p>
</li>
<li><p>Mark your folder to actually contain some Hitchy application. Put <code>{}</code> in a file named <strong>hitchy.json</strong> using your favourite text editor. This file must be located next to <strong>package.json</strong> file created before.</p>
</li>
<li><p>Open your <strong>package.json</strong> file created before and add script in section named <code>scripts</code>. If that section is missing you might need to add it as well, of course:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;server&quot;: &quot;hitchy start&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="6">
<li>Start your Hitchy service:<br><code>npm run server</code></li>
</ol>
<h1 id="…-As-Part-Of-Some-Existing-Project"><a href="#…-As-Part-Of-Some-Existing-Project" class="headerlink" title="… As Part Of Some Existing Project"></a>… As Part Of Some Existing Project</h1><p>Well, Hitchy wouldn’t be called hitchy, if it’s not suitable for hitching onto something existing. Here comes one of two ways you should consider hitchy with regards to this framework.</p>
<blockquote>
<p>The second way is using Hitchy as a middleware injected into an existing project relying on ExpressJS. However, that scenario isn’t covered in this tutorial, yet. You might want to check out tests included with Hitchy for more information.</p>
</blockquote>
<p>Lets consider you want to start a web application using another super great framework: <a href="https://vuejs.org/" target="_blank" rel="noopener">VueJS</a>. You might like to use one their templates to get started:</p>
<ol>
<li><p>Using your favourite CLI install <a href="https://www.npmjs.com/package/@vue/cli" target="_blank" rel="noopener">@vue/cli</a> globally:<br><code>npm install -g @vue/cli</code></p>
</li>
<li><p>Create new project from template using global script <strong>vue</strong> available by now:<br><code>vue create myproject</code><br>This will start a scaffolding process asking some questions. Answer them as desired. This will create a new subfolder named <strong>myproject</strong> in your current working directory.</p>
</li>
<li><p>Enter that folder now:<br><code>cd myproject</code></p>
</li>
<li><p><em>Adjust this VueJS application to your needs. Just consider some time might have passed since you started the project before and you you think it’s time to add Hitchy for backend stuff.</em></p>
</li>
<li><p>With your CLI (still) seeing your project’s folder <strong>myproject</strong> as its current working directory create a new subfolder named <strong>server</strong>. Of course, you may name it as you prefer. But in steps below this folder is named <strong>server</strong>.</p>
</li>
<li><p>Install hitchy as another dependency of your basic project:<br><code>npm install hitchy</code></p>
</li>
<li><p>Put a file named <strong>hitchy.json</strong> into created subfolder <strong>server</strong> with content <code>{}</code>. This will properly mark that subfolder to contain a Hitchy-based (sub-)project.</p>
</li>
<li><p>Adjust the existing <strong>package.json</strong> file of your VueJS project adding another script in section <code>scripts</code> (which is existing due to VueJS already):  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  ...,</span><br><span class="line">  &quot;server&quot;: &quot;hitchy start --project server --extensions .&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This extended invocation of Hitchy instructs its CLI to consider actual project residing in subfolder <strong>server</strong> while extensions to be added soon will be available in <strong>node_modules</strong> folder of containing VueJS application itself thus referring to the root directory of VueJS project.</p>
</li>
<li><p>Start your Hitchy service now:<br><code>npm run server</code></p>
</li>
</ol>
<h2 id="Common-Pitfall-CORS"><a href="#Common-Pitfall-CORS" class="headerlink" title="Common Pitfall: CORS"></a>Common Pitfall: CORS</h2><h3 id="Development-Setup"><a href="#Development-Setup" class="headerlink" title="Development Setup"></a>Development Setup</h3><p>Developing a VueJS application usually involves running a development server of VueJS exposing your application for local testing supporting hot reloading. This is pretty useful but due to using different service your application won’t be able to access the Hitchy server set up before due to CORS restrictions applied by your browser.</p>
<blockquote>
<p>When browsing your application via development server on <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a> it can’t access Hitchy server which is available via <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> due to browser considering both services providing different domains because of different port numbers. This is why CORS will prevent your application served via <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a> from accessing service at <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> out of the box.</p>
</blockquote>
<p>One option is to add proper CORS headers provided by Hitchy server. Another option is to use a plugin for Hitchy which is providing reverse proxy so you can access your VueJS development server via Hitchy server, thus using same service in same <em>domain</em>.</p>
<ol>
<li><p>When in your project’s root folder - which is the one created by VueJS CLI - add the <a href="https://www.npmjs.com/package/hitchy-plugin-proxy" target="_blank" rel="noopener">reverse proxy plugin</a> as a dependency:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D hitchy-plugin-proxy</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   This dependency will be discovered by Hitchy due to the way it is started with argument <code>--extensions .</code> as configured in step 8 above.</p>
<ol start="2">
<li><p>Add folder <strong>server/config</strong> unless created before. This folder is containing Hitchy’s configuration in one or more files.</p>
</li>
<li><p>Add another configuration file for setting up reverse proxy plugin. The file’s name doesn’t matter but as a matter of convention you should name it just like the part of configuration it is exporting. In case of the proxy this is <code>proxy</code> and so you should name it <strong>server/config/proxy.js</strong>.</p>
<p>Its content is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( process.env.NODE_ENV !== <span class="string">"production"</span> ) &#123;</span><br><span class="line">  exports.proxy = [</span><br><span class="line">    &#123;</span><br><span class="line">      prefix: <span class="string">"/"</span>,</span><br><span class="line">      target: <span class="string">"http://localhost:8080/"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This configuration is providing proxy configuration unless running in a production environment. This is due to be used with <em>development</em> server of VueJS, only. See the next chapter for how to integrate VueJS application in a production setup. </p>
</blockquote>
<p>The actual configuration is setting up single reverse proxy instance forwarding all requests in scope of URL <code>/</code> (NOTE: that don’t match any <em>more specific</em> route configured in Hitchy) to the server at <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> which is the development server of VueJS CLI service.</p>
</li>
<li><p>Restart the Hitchy server. After that your development setup is done. You still need to run the VueJS development server, but instead of using it directly you start your application via Hitchy server instead.</p>
</li>
</ol>
<h3 id="Production-Setup"><a href="#Production-Setup" class="headerlink" title="Production Setup"></a>Production Setup</h3><p>When in production setup you probably want to use a similar setup with the VueJS application served via Hitchy server so it won’t suffer from CORS limitations as well. In production, a VueJS application isn’t served via special server but consists of a set of files to be served by any server you like. So this server should be Hitchy server for sure.</p>
<ol>
<li><p>Install <a href="https://www.npmjs.com/package/hitchy-plugin-static" target="_blank" rel="noopener">another Hitchy plugin</a> available for exposing files in a certain subfolder of your Hitchy server.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hitchy-plugin-static</span><br></pre></td></tr></table></figure>
</li>
<li><p>This plugin works pretty similar to the proxy plugin installed in chapter before. Create a configuration file <strong>server/config/static.js</strong> containing this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( process.env.NODE_ENV === <span class="string">"production"</span> ) &#123;</span><br><span class="line">  exports.static = [</span><br><span class="line">    &#123;</span><br><span class="line">      prefix: <span class="string">""</span>,</span><br><span class="line">      folder: <span class="string">"build"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   This configuration is serving as a counterpart to the proxy’s configuration in that it is applied in production mode, only. It is mapping any incoming request to files in folder <strong>server/build</strong> unless matching any more specific route of Hitchy server.</p>
<p>   Due to security limitations the exposed folder must be part of your Hitchy server’s root folder which isn’t your project’s folder but the one containing the <strong>hitchy.json</strong> file, so it’s subfolder <strong>server</strong>.</p>
<ol start="3">
<li><p>You’d probably want VueJS CLI service to put builds of your VueJS application right into that folder. Create file <strong>vue.config.js</strong> in your project’s folder (which isn’t <strong>server</strong>) unless this file has been created before. It is exporting your adjustment to VUE CLI service’s configuration. The essential property here is <code>outputDir</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  outputDir: <span class="string">"server/build"</span>,</span><br><span class="line">  baseUrl: <span class="string">"/"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   The additional option <code>baseUrl</code> is set to make sure built files are addressing related files “relative” to document root of Hitchy’s server.</p>
<ol start="4">
<li><p>Build your application whenever you like:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
</li>
<li><p>After restarting Hitchy - remember to use environment variable <code>IP=0.0.0.0</code> on starting Hitchy so its publicly addressable - you should be able to open your built Hitchy application which is capable of addressing the backend services exposed by Hitchy.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=production IP=0.0.0.0 npm run server</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="See-Hitchy-In-First-Action"><a href="#See-Hitchy-In-First-Action" class="headerlink" title="See Hitchy In First Action"></a>See Hitchy In First Action</h1><p>After starting hitchy you should read some output like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">starting application using internal server ...</span><br><span class="line"></span><br><span class="line">Service is running. Open </span><br><span class="line"></span><br><span class="line">   http://127.0.0.1:3000 </span><br><span class="line"></span><br><span class="line">in your favourite browser now!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Hitchy is ready to serve requests, now.</span><br></pre></td></tr></table></figure>
<p>Of course you might follow provided instruction and open URL <a href="http://127.0.0.1:3000">http://127.0.0.1:3000</a> in your favourite web browser. This should result in a view like this one:</p>
<p><img src="/images/hitchy-first-start-browser-error.png" alt=""></p>
<p>That view is actually provided by Hitchy’s core which is solely up and running by now. This core is ready to handle additional routing to be set up soon. But for now it’s answering every request with this screen indicating that the required view doesn’t (yet) exist.</p>
<p>If you happen to be really fast or if there are some extensions to be bootstrapped later you might happen to see a different view presented by Hitchy’s core:</p>
<p><img src="/images/hitchy-splash.png" alt=""></p>
<p>Hitchy is pretty fast on opening socket listening for incoming connections. But it might need some time to set things up. This view is presented as some kind of “splash screen” indicating that Hitchy isn’t ready to serve requests, yet.</p>
<h1 id="Ready-for-some-actual-interaction"><a href="#Ready-for-some-actual-interaction" class="headerlink" title="Ready for some actual interaction?"></a>Ready for some actual interaction?</h1><p>See the <a href="/getting-started/routes.html">definition of custom routes</a>, next …</p>
</article></div><div id="left"><nav class="sub navigation"><ul><li class="item selected"><a href="getting-started/installation.html">Installation</a></li><li class="item"><a href="getting-started/routes.html">Routes</a></li><li class="item"><a href="getting-started/odm.html">Odm</a></li></ul></nav></div><div id="right"></div></div></div><div id="south"><div class="center-block"><div class="copyright">&copy; 2018 <a href="http://cepharum.de" target="_blank">cepharum GmbH</a></div> - <nav class="footer"><ul><li class="item"><a href="imprint/">Imprint</a></li></ul></nav> - <div class="timestamp">Last Update: November 13, 2018 11:32 PM</div></div></div></div><script type="text/javascript" src="js/fx.js"></script></body></html>