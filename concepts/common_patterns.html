<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><base href="/"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="design/index.css"><title>Supported Common Coding Patterns | Hitchy</title></head><body class="page"><div id="wrapper"><div id="north"><div class="navigation"><nav class="primary center-block"><ul><li class="item"><a href="">Home</a></li><li class="item"><a href="about/">About</a></li><li class="item"><a href="download/">Download</a></li><li class="selected item"><a href="concepts/">Concepts</a></li><li class="item"><a href="runtime/">At Runtime</a></li><li class="item"><a href="extensions/">Extensions</a></li></ul><div class="boilerplate"><div class="site-title">Hitchy</div><div class="site-subtitle">a Javascript-based web application framework</div></div></nav></div><div class="center-block"><h1>Supported Common Coding Patterns</h1></div></div><div id="main"><div class="columnizer"><div id="core"><article class="center-block"><h2 id="Common-Module-Pattern-CMP"><a href="#Common-Module-Pattern-CMP" class="headerlink" title="Common Module Pattern (CMP)"></a>Common Module Pattern (CMP)</h2><p>In several situations Hitchy supports particular pattern for providing additional data and/or functionality. This pattern is available </p>
<ul>
<li>for injecting components into your Hitchy setup, </li>
<li>for providing custom configuration in your project’s configuration related to Hitchy and </li>
<li>in all models, controllers, policies and services of your project and its extending components.</li>
</ul>
<p>In either case some module is loaded using <code>require()</code>. Any such <em>module</em> might provide requested data as such which is “the common way” of exporting its API. However, the more beneficial way is to export a single function that is expected to return that requested data. </p>
<p>You are advised to stick with the latter technique to gain full access on API of Hitchy and options used to start it. In addition the module becomes able to return promise for providing requested data with delay. For example, discovery process or compilation of project’s configuration is delayed until some returned promise is resolved with eventually provided information.</p>
<p>A short example of Hitchy’s common module pattern looks like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Provides implementation for second stage of bootstrapping Hitchy instance.</div><div class="line"> *</div><div class="line"> * @this HitchyAPI</div><div class="line"> * @param &#123;HitchyOptions&#125; options</div><div class="line"> * @returns &#123;function(modules:HitchyComponentHandle[]):Promise.&lt;HitchyComponentHandle[]&gt;&#125;</div><div class="line"> */</div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"> options </span>) </span>&#123;</div><div class="line">	<span class="keyword">const</span> api = <span class="keyword">this</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="comment">// here comes your actual data </span></div><div class="line">		configure: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>By following this pattern access on Hitchy’s API is provided through closure variable <code>api</code> here. This includes all found configuration, any model or controller etc. Thus, when documentation refers to some variable or data available as <code>api.foo.bar</code> this is referring to the access granted here. In addition <code>options</code> is available to access configuration provided by application or runtime environment injecting Hitchy. E.g. on using Hitchy’s internal server this includes any custom command line option.</p>
<h2 id="Common-Module-Function-Pattern-CMFP"><a href="#Common-Module-Function-Pattern-CMFP" class="headerlink" title="Common Module Function Pattern (CMFP)"></a>Common Module Function Pattern (CMFP)</h2><p>As a derived concept functions might be in compliance with <em>common module function pattern</em> by satisfying these criteria:</p>
<ol>
<li>It <strong>must</strong> expect reference on <code>api</code> via its <code>this</code> variable.</li>
<li>It <strong>must</strong> expect reference on <code>options</code> in first argument.</li>
<li>It <strong>might</strong> expect any <em>additional arguments</em> succeeding that first one.</li>
<li>It <strong>might</strong> return Promise instance to delay actual result. This <strong>may</strong> suspend overall processing for relying on this function’s result.</li>
</ol>
<p>In several cases a component complying with Common Module Pattern is exporting functions via this pattern which comply with Common Module Function Pattern and thus are called with references on <code>api</code> and <code>options</code>, too. Though this is slightly redundant by design it establishes more flexibility in designing components and modules since modules mustn’t comply with Common Module Pattern as a whole, but still might provide function complying with this pattern. In addition passing references locally might result in a slightly better performance due to preventing deeply accessing closure scope variables.</p>
</article></div><div id="left"><nav class="sub navigation"><ul><li class="item"><a href="concepts/core.html">Core Principles</a></li><li class="item"><a href="concepts/es6.html">ECMAScript 6</a></li><li class="item"><a href="concepts/dependencies.html">On Dependencies</a></li><li class="item"><a href="concepts/promises.html">Promises</a></li><li class="item selected"><a href="concepts/common_patterns.html">Common Patterns</a></li><li class="item"><a href="concepts/the_meta_file.html">The Meta File</a></li></ul></nav></div><div id="right"></div></div></div><div id="south"><div class="center-block"><div class="copyright">&copy; 2017 <a href="http://cepharum.de" target="_blank">cepharum GmbH</a></div> - <nav class="footer"><ul><li class="item"><a href="imprint/">Imprint</a></li></ul></nav> - <div class="timestamp">Last Update: April 26, 2017 1:17 AM</div></div></div></div><script type="text/javascript" src="js/fx.js"></script></body></html>